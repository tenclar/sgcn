<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:p="http://primefaces.org/ui"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:form id="frmrelatorio"   >

        <p:panel header="Filtros"   >

            <p:outputPanel id="outPeriodo" >
                <h:panelGrid columns="2">
                    <h:selectOneRadio id="selperiodo" label="Período" required="true" value="#{relatorioBean.periodo}"     >
                        <f:selectItem  itemValue="1" itemLabel="Geral"  />
                                           <f:selectItem   itemValue="2"  itemLabel="Período de cadastro"  />
                        <p:ajax listener="#{relatorioBean.handleSelectItemPeriodo()}" update="outPeriodo"    />

                    </h:selectOneRadio>
                    <p:message for="selperiodo"  />
                </h:panelGrid>

                <p:separator />
                
                <p:panel id="pdatas" widgetVar="pDatas"  binding="#{relatorioBean.panelperiodo}"  >
                    <h:panelGrid id="pgdads" columns="2">
                        <p:outputPanel id="opdemanda">
                            <fieldset>
                                <legend>Ano Demanda</legend>
                                <h:panelGrid  columns="4">
                                    <h:panelGrid columns="2">
                                        <h:outputLabel for="cidanodemandainicial" value="Inicial" />  

                                        <p:selectOneMenu id="cidanodemandainicial" value="#{relatorioBean.demandainicio}"   converter="IndexedConverter" >
                                            
                                            <f:selectItems value="#{demandaBean.selectItems}"  var="anolista" itemLabel="#{anolista}" itemValue="#{anolista}" />
                                        </p:selectOneMenu> 
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel for="cidanodemandafinal" value="Final" />  

                                        <p:selectOneMenu id="cidanodemandafinal"  value="#{relatorioBean.demandafinal}"   converter="IndexedConverter" >
                                         
                                              <f:selectItems value="#{demandaBean.selectItems}"  var="anolista" itemLabel="#{anolista}" itemValue="#{anolista}" />
                                        </p:selectOneMenu> 
                                    </h:panelGrid>
                                </h:panelGrid>
                            </fieldset>
                        </p:outputPanel>    

<!--
                        <p:outputPanel id="opcadastro">
                            <fieldset>
                                <legend>Data de Cadatro</legend>
                                <h:panelGrid columns="4">
                                    <h:outputLabel for="seldataInicial" value="Inicial" />                                                                                           
                                    <p:calendar id="seldataInicial" onkeyup="Formatadata(this, event);" 
                                                onchange="validaDat(this, this.value);"  
                                                locale="pt_BR" maxlength="10" size="10" pattern="dd/MM/yyyy" >

                                    </p:calendar>
                                    <h:outputLabel for="seldataFinal" value="Final" /> 
                                    <p:calendar id="seldataFinal" onkeyup="Formatadata(this, event);"
                                                onchange="validaDat(this, this.value);" 
                                                locale="pt_BR" maxlength="10" size="10" pattern="dd/MM/yyyy" >

                                    </p:calendar>
                                </h:panelGrid>
                            </fieldset>
                        </p:outputPanel>    
-->

                    </h:panelGrid>
                </p:panel>

            </p:outputPanel>

            <p:outputPanel>
                <fieldset>
                    <legend>Localidade</legend>

                    <h:panelGrid columns="2"  >


                        <h:outputLabel  value="Cidade: " />     
                        <h:outputLabel  value="Bairro / Ramal: " />    



                        <p:selectOneMenu id="endbuscacid" label="Cidade" value="#{relatorioBean.pesquisaCidade}"  
                                         filter="true" filterMatchMode="startsWith" converter="IndexedConverter" >
                            <f:selectItems value="#{relatorioBean.selectItemsCidade}" />
                            <p:ajax update="endbuscabairro" listener="#{relatorioBean.handlePesquisaCidadeChange}" />
                        </p:selectOneMenu>

                        <p:selectOneMenu id="endbuscabairro" value="#{relatorioBean.pesquisaBairro}" 
                                         filter="true" filterMatchMode="startsWith"
                                         converter="IndexedConverter"   >

                            <f:selectItems value="#{relatorioBean.selectItemsBairro}" />                            
                        </p:selectOneMenu> 
                    </h:panelGrid>
                </fieldset>
            </p:outputPanel>

            <p:outputPanel id="opfiltros"  >
                <fieldset style="height:  150px" >
                    <legend>Informações Cadastrais para Filtro</legend>
                    <h:panelGrid columns="2"  >
                        <h:panelGrid columns="2"  >
                            <h:outputLabel for="selstatuscid" value="Tipo Beneficio" />                             
                            <p:selectOneMenu id="selstatuscid" value="#{relatorioBean.statuscid}" converter="IndexedConverter"  style="width: 130px;"  >
                                <f:selectItems value="#{relatorioBean.selectItemStatusCid}" />

                            </p:selectOneMenu>                    
                            <h:outputLabel for="selstatusben" value="Status Beneficiado"  />                             
                            <p:selectOneMenu id="selstatusben" value="#{relatorioBean.statusben}"    style="width: 130px;"  >
                                <f:selectItems value="#{relatorioBean.selectItemStatusBen}" />

                            </p:selectOneMenu>        
                            <h:outputLabel for="selPublico" value="Público Alvo" />
                            <p:selectOneMenu id="selPublico" label="Público" value="#{relatorioBean.publico}" 
                                             converter="IndexedConverter"
                                             style="width: 130px"  >
                                <f:selectItems value="#{relatorioBean.selectItemsPublico}"  />
                            </p:selectOneMenu> 
                        </h:panelGrid>
                        <h:panelGrid columns="2"  >
                            <h:outputLabel for="selRamo" value="Ramo" />
                            <p:selectOneMenu id="selRamo" label="Ramo do Empreendimento" value="#{relatorioBean.ramo}" 
                                             converter="IndexedConverter" style="width: 130px" 
                                             filter="true" filterMatchMode="startsWith" >
                                <f:selectItems value="#{ramoEmpreendimentoBean.selectItemsRamo}" />
                            </p:selectOneMenu> 
                            <h:outputLabel for="selGen" value="Gênero"  />                                
                            <p:selectOneMenu id="selGen"  style="width:130px" value="#{relatorioBean.genero}"   >
                                <f:selectItem itemValue="T"  itemLabel="TODOS"   />
                                <f:selectItem itemValue="M"  itemLabel="M"   />
                                <f:selectItem itemValue="F"  itemLabel="F" />                
                            </p:selectOneMenu> 
                            <h:outputLabel for="selEstadoCivil" value="Estado  Civil" />
                            <p:selectOneMenu  id="selEstadoCivil"   value="#{relatorioBean.estadocivil}"  converter="IndexedConverter" style="width:130px"  >

                                <f:selectItems value="#{estadoCivilBean.selectItems}" />

                            </p:selectOneMenu> 


                        </h:panelGrid>
                    </h:panelGrid>
                </fieldset>
            </p:outputPanel>
        </p:panel>
        <p:panel id="pgrupo" header="Agrupar">

            <h:selectOneRadio  id="selagrupar" value="#{relatorioBean.selectonegroup}"   layout="pageDirection"  >

<!--                <f:selectItem itemLabel="NENHUM" itemValue="NENHUM"   />-->
                <f:selectItem itemLabel="CIDADE" itemValue="CIDADE"   />
                <f:selectItem itemLabel="CIDADE - RAMO" itemValue="CIDADERAMO"   />
                <f:selectItem itemLabel="CIDADE - RAMO - GENERO" itemValue="CIDADERAMOGENERO"   />
                <f:selectItem itemLabel="CIDADE - GÊNERO" itemValue="CIDADEGENERO"   />
                <f:selectItem itemLabel="CIDADE - BAIRRO" itemValue="CIDADEBAIRRO"   />   
                <f:selectItem itemLabel="CIDADE - BAIRRO - RAMO" itemValue="CIDADEBAIRRORAMO"   />
                <f:selectItem itemLabel="CIDADE - BAIRRO - GÊNERO" itemValue="CIDADEBAIRROGENERO"   />
                <f:selectItem itemLabel="CIDADE - BAIRRO - RAMO - GÊNERO" itemValue="CIDADEBAIRRORAMOGENERO"   />
                <f:selectItem itemLabel="DEMANDA" itemValue="DEMANDA"   />
                <f:selectItem itemLabel="DEMANDA - GÊNERO" itemValue="DEMANDAGENERO"   />
                <f:selectItem itemLabel="DEMANDA - CIDADE" itemValue="DEMANDACIDADE"   />                
                <f:selectItem itemLabel="DEMANDA - CIDADE - RAMO" itemValue="DEMANDACIDADE"   />                
                <f:selectItem itemLabel="DEMANDA - CIDADE - GENERO" itemValue="DEMANDACIDADE"   />                
                <f:selectItem itemLabel="DEMANDA - CIDADE - BAIRRO" itemValue="DEMANDACIDADEBAIRRO"   /> 
                <f:selectItem itemLabel="DEMANDA - CIDADE - BAIRRO - GÊNERO" itemValue="DEMANDACIDADEBAIRROGENERO"   /> 
                <f:selectItem itemLabel="DEMANDA - CIDADE - BAIRRO - RAMO" itemValue="DEMANDACIDADEBAIRRORAMO"   /> 
                <f:selectItem itemLabel="DEMANDA - CIDADE - BAIRRO - RAMO - GÊNERO" itemValue="DEMANDACIDADEBAIRRORAMOGENERO"   /> 


            </h:selectOneRadio>

        </p:panel>

        <p:separator />


        <p:commandButton action="#{relatorioBean.relatorioQuantitativo()}"  update=":messages" ajax="false"
                         icon="ui-icon-search" value="Pesquisar"  onclick="this.form.target = '_new'"   >
        </p:commandButton>

    </h:form>
</ui:component>

